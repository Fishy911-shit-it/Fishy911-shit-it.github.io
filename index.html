<!DOCTYPE html>
<html>
<head>

<title>Pro Shooter</title>

<style>

body{
margin:0;
background:black;
color:white;
font-family:Arial;
text-align:center;
}

canvas{
background:#111;
display:block;
margin:auto;
cursor:crosshair;
}

button{
padding:10px;
font-size:16px;
margin:5px;
}

</style>

</head>

<body>

<h2>PRO SHOOTER</h2>

<div id="menu">

<button onclick="startGame()">
Start Game
</button>

<button onclick="upgrade()">
Upgrade Gun (100)
</button>

</div>

<p>

Score:
<span id="score">0</span>

Health:
<span id="health">100</span>

Level:
<span id="level">1</span>

High:
<span id="high">0</span>

</p>

<canvas
id="game"
width="900"
height="600">
</canvas>

<script>

const canvas =
document.getElementById("game");

const c =
canvas.getContext("2d");

let gameRunning=false;

let score=0;

let level=1;

let gunLevel=1;

let high=
localStorage.high||0;

document.getElementById("high")
textContent=high;

let player={

x:450,
y:300,
size:20,
speed:4,
health:100

};

let mouse={x:0,y:0};

let bullets=[];

let enemies=[];

let boss=null;

let keys={};

canvas.addEventListener(
"mousemove",
e=>{

let rect=
canvas.getBoundingClientRect();

mouse.x=
e.clientX-rect.left;

mouse.y=
e.clientY-rect.top;

}
);

document.addEventListener(
"keydown",
e=>keys[e.key]=true
);

document.addEventListener(
"keyup",
e=>keys[e.key]=false
);

canvas.addEventListener(
"click",
shoot
);


function startGame(){

gameRunning=true;

document.getElementById("menu")
style.display="none";

}


function upgrade(){

if(score>=100){

score-=100;

gunLevel++;

}

}


function shoot(){

if(!gameRunning)
return;

let dx=
mouse.x-player.x;

let dy=
mouse.y-player.y;

let d=
Math.sqrt(dx*dx+dy*dy);

bullets.push({

x:player.x,
y:player.y,

dx:dx/d*8,

dy:dy/d*8,

size:5

});

}


function spawnEnemy(){

if(!gameRunning)
return;

enemies.push({

x:Math.random()*900,
y:Math.random()*600,

speed:1+level*0.3,
health:2

});

}

setInterval(spawnEnemy,2000);


function spawnBoss(){

boss={

x:450,
y:100,

health:50+level*20,

size:60

};

}


function update(){

if(!gameRunning)
return;


/* Movement */

if(keys["w"])
player.y-=player.speed;

if(keys["s"])
player.y+=player.speed;

if(keys["a"])
player.x-=player.speed;

if(keys["d"])
player.x+=player.speed;


/* Bullets */

bullets.forEach((b,i)=>{

b.x+=b.dx;
b.y+=b.dy;

if(b.x<0||
b.x>900||
b.y<0||
b.y>600)

bullets.splice(i,1);

});


/* Enemies */

enemies.forEach((e,ei)=>{

let dx=
player.x-e.x;

let dy=
player.y-e.y;

let d=
Math.sqrt(dx*dx+dy*dy);

e.x+=dx/d*e.speed;

e.y+=dy/d*e.speed;

if(d<20)
player.health-=0.3;

});


/* Boss */

if(score>200 &&
!boss)

spawnBoss();


if(boss){

let dx=
player.x-boss.x;

boss.x+=dx*0.01;

bullets.forEach((b,bi)=>{

let dx=b.x-boss.x;
let dy=b.y-boss.y;

let d=
Math.sqrt(dx*dx+dy*dy);

if(d<50){

boss.health--;

bullets.splice(bi,1);

if(boss.health<=0){

score+=200;

boss=null;

level++;

}

}

});

}


/* Bullet hits */

bullets.forEach((b,bi)=>{

enemies.forEach((e,ei)=>{

let dx=b.x-e.x;

let dy=b.y-e.y;

let d=
Math.sqrt(dx*dx+dy*dy);

if(d<20){

e.health--;

bullets.splice(bi,1);

if(e.health<=0){

score+=10;

enemies.splice(ei,1);

}

}

});

});


/* UI */

document.getElementById("score")
textContent=score;

document.getElementById("health")
textContent=Math.floor(
player.health);

document.getElementById("level")
textContent=level;


/* Highscore */

if(score>high){

high=score;

localStorage.high=score;

document.getElementById("high")
textContent=score;

}


if(player.health<=0){

alert("Game Over");

location.reload();

}

}


function draw(){

c.clearRect(0,0,900,600);


/* Player */

c.fillStyle="cyan";

c.fillRect(
player.x,
player.y,
player.size,
player.size);


/* Bullets */

c.fillStyle="yellow";

bullets.forEach(b=>{

c.fillRect(
b.x,
b.y,
b.size,
b.size);

});


/* Enemies */

c.fillStyle="red";

enemies.forEach(e=>{

c.fillRect(
e.x,
e.y,
20,
20);

});


/* Boss */

if(boss){

c.fillStyle="purple";

c.fillRect(
boss.x,
boss.y,
boss.size,
boss.size);

}


}


function loop(){

update();

draw();

requestAnimationFrame(loop);

}

loop();

</script>

</body>
</html>
